# docker-compose.yml Headplane — Géré par Ansible
# ATTENTION : Image distroless — PAS de healthcheck interne
# docker-compose.yml Headplane — Géré par Ansible
services:
  headplane:
    image: "ghcr.io/tale/headplane:{{ headplane_version }}"
    container_name: headplane
    restart: unless-stopped
    expose:
      - "3000"
    volumes:
      - "{{ headplane_data_path }}/config.yaml:/etc/headplane/config.yaml:ro"
      - "{{ headplane_data_path }}/data:/var/lib/headplane"
      - "{{ headscale_data_path }}/config/config.yaml:/etc/headscale/config.yaml:ro"
      - "/var/run/docker.sock:/var/run/docker.sock:ro"
    labels:
      me.tale.headplane.target: "headscale"
    networks:
      - proxy-net
networks:
  proxy-net:
    external: true
