#!/bin/bash
# ============================================================
# Vérification de l'état d'un conteneur Docker
# Géré par Ansible - NE PAS MODIFIER MANUELLEMENT
# ============================================================
# Usage : check-container.sh <container_name>
# Retourne : 0 = running, 1 = not running

CONTAINER="$1"

if [ -z "$CONTAINER" ]; then
  echo "Usage: $0 <container_name>"
  exit 1
fi

STATE=$(/usr/bin/docker inspect -f '{{ '{{' }}.State.Running{{ '}}' }}' "$CONTAINER" 2>/dev/null)

if [ "$STATE" = "true" ]; then
  exit 0
else
  exit 1
fi
